<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ±ØªÙŠØ¨ Ø¯ÙˆØ±ÙŠ PES ELITE</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #eaff00; --bg: #020205; --card: #0a0a0f; }
        body { background: var(--bg); color: white; font-family: 'Cairo'; margin: 0; padding: 10px; }
        .container { max-width: 900px; margin: auto; }
        h1 { color: var(--p); text-align: center; font-size: 1.5rem; text-shadow: 0 0 10px rgba(234, 255, 0, 0.3); }
        
        /* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© */
        .match-card { background: var(--card); border: 1px solid #222; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; padding: 12px; margin-bottom: 10px; }
        .score { background: var(--p); color: #000; padding: 2px 12px; border-radius: 5px; font-weight: 900; }
        
        /* Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        .table-wrap { overflow-x: auto; background: var(--card); border-radius: 12px; border: 1px solid #222; }
        table { width: 100%; border-collapse: collapse; min-width: 500px; }
        th { background: #111; color: var(--p); font-size: 0.8rem; padding: 12px; }
        td { padding: 10px; border-bottom: 1px solid #111; text-align: center; font-size: 0.9rem; }
        .team-cell { display: flex; align-items: center; gap: 8px; text-align: right; }
        .logo { width: 25px; height: 25px; border-radius: 50%; background: #222; object-fit: cover; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ† PES ELITE LEAGUE</h1>
    
    <h3 style="color: #666; font-size: 0.9rem; border-right: 3px solid var(--p); padding-right: 10px;">Ø¢Ø®Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
    <div id="matchesHistoryList"></div>

    <h3 style="color: #666; font-size: 0.9rem; border-right: 3px solid var(--p); padding-right: 10px; margin-top: 20px;">Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</h3>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th style="text-align: right;">Ø§Ù„ÙØ±ÙŠÙ‚</th>
                    <th>Ù„Ø¹Ø¨</th>
                    <th>+/-</th>
                    <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                </tr>
            </thead>
            <tbody id="standingsBody"></tbody>
        </table>
    </div>
</div>



<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCYAtj7gB7bfXPPSRojddCzhIyUMN7Tnow",
        authDomain: "pes-elite.firebaseapp.com",
        projectId: "pes-elite",
        storageBucket: "pes-elite.firebasestorage.app",
        messagingSenderId: "407069539120",
        appId: "1:407069539120:web:466249fa7f716266d9e6f5"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function loadData() {
        // Ø¬Ù„Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨
        db.collection("leaguePlayers").orderBy("pts", "desc").orderBy("gd", "desc").onSnapshot(snap => {
            const tbody = document.getElementById('standingsBody');
            tbody.innerHTML = ""; let i = 1;
            snap.forEach(doc => {
                const p = doc.data();
                tbody.innerHTML += `<tr>
                    <td style="color:${i<=3?'var(--p)':'#fff'}">${i++}</td>
                    <td><div class="team-cell"><img src="${p.photoURL || 'https://via.placeholder.com/30'}" class="logo"><span>${p.nickname}</span></div></td>
                    <td>${p.played || 0}</td>
                    <td style="color:${(p.gd||0)>=0?'#0f0':'#f00'}">${p.gd || 0}</td>
                    <td style="font-weight:900; color:var(--p)">${p.pts || 0}</td>
                </tr>`;
            });
        });

        // Ø¬Ù„Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        db.collection("matchesHistory").orderBy("time", "desc").limit(5).onSnapshot(snap => {
            const list = document.getElementById('matchesHistoryList');
            list.innerHTML = "";
            snap.forEach(doc => {
                const m = doc.data();
                list.innerHTML += `<div class="match-card">
                    <span style="width:35%; font-size:0.8rem">${m.team1}</span>
                    <span class="score">${m.score1} - ${m.score2}</span>
                    <span style="width:35%; text-align:left; font-size:0.8rem">${m.team2}</span>
                </div>`;
            });
        });
    }
    loadData();
</script>
</body>
</html>
